[{"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\index.js":"1","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\App.js":"2","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\Home.js":"3","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\auth\\Login.js":"4","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\auth\\Register.js":"5","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\components\\nav\\Header.js":"6","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\firebase.js":"7","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\auth\\RegisterComplete.js":"8","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\reducers\\index.js":"9","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\reducers\\userReducer.js":"10","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\auth\\ForgotPassword.js":"11","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\functions\\auth.js":"12"},{"size":581,"mtime":1612796960929,"results":"13","hashOfConfig":"14"},{"size":1888,"mtime":1613400206232,"results":"15","hashOfConfig":"14"},{"size":133,"mtime":1611413637508,"results":"16","hashOfConfig":"14"},{"size":4256,"mtime":1613400178441,"results":"17","hashOfConfig":"14"},{"size":1658,"mtime":1612801584096,"results":"18","hashOfConfig":"14"},{"size":1996,"mtime":1612800264186,"results":"19","hashOfConfig":"14"},{"size":594,"mtime":1611414331932,"results":"20","hashOfConfig":"14"},{"size":3068,"mtime":1613400175189,"results":"21","hashOfConfig":"14"},{"size":185,"mtime":1612796938213,"results":"22","hashOfConfig":"14"},{"size":230,"mtime":1612796935228,"results":"23","hashOfConfig":"14"},{"size":1686,"mtime":1612801398208,"results":"24","hashOfConfig":"14"},{"size":468,"mtime":1613400070664,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1rimd6f",{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"28"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"28"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\index.js",[],["54","55"],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\App.js",["56"],"import './App.css';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport React, { useEffect } from 'react';\r\nimport Home from './pages/Home';\r\nimport Login from './pages/auth/Login';\r\nimport Register from './pages/auth/Register';\r\nimport Header from './components/nav/Header';\r\nimport RegisterComplete from './pages/auth/RegisterComplete';\r\nimport { auth } from './firebase';\r\nimport { useDispatch } from 'react-redux';\r\nimport ForgorPassword from './pages/auth/ForgotPassword';\r\nimport { currentUser } from './functions/auth';\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n\r\n  //to check firebase auth state\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\r\n      if (user) {\r\n        const idTokenResult = await user.getIdTokenResult();\r\n        currentUser(idTokenResult.token)\r\n          .then((res) => {\r\n            dispatch({\r\n              type: 'LOGGED_IN_USER',\r\n              payload: {\r\n                name: res.data.name,\r\n                email: res.data.email,\r\n                token: idTokenResult.token,\r\n                role: res.data.roles,\r\n                _id: res.data._id,\r\n              },\r\n            });\r\n          })\r\n          .catch((err) => console.log(err));\r\n      }\r\n    });\r\n    //cleanup\r\n    return () => unsubscribe();\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <ToastContainer />\r\n      <Switch>\r\n        <Route exact path='/' component={Home} />\r\n        <Route exact path='/login' component={Login} />\r\n        <Route exact path='/register' component={Register} />\r\n        <Route exact path='/register/complete' component={RegisterComplete} />\r\n        <Route exact path='/forgot/password' component={ForgorPassword} />\r\n      </Switch>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\Home.js",[],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\auth\\Login.js",[],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\auth\\Register.js",[],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\components\\nav\\Header.js",[],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\firebase.js",[],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\auth\\RegisterComplete.js",["57"],"import React, { useState, useEffect } from 'react';\r\nimport { auth } from '../../firebase';\r\nimport { toast } from 'react-toastify';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { createOrUpdateUser } from '../../functions/auth';\r\n\r\nconst RegisterComplete = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  useEffect(() => {\r\n    //console.log(window.localStorage.getItem('emailForRegistration'));\r\n    setEmail(window.localStorage.getItem('emailforRegistration'));\r\n    //console.log(window.location.href);\r\n    //console.log(window.localStorage.getItem('emailforRegistration'));\r\n  }, []);\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    //validation\r\n    if (!email || !password) {\r\n      toast.error('Email and password is required');\r\n      return;\r\n    }\r\n    if (password.length < 6) {\r\n      toast.error('Password must be at least 6 characters long');\r\n      return;\r\n    }\r\n    try {\r\n      const result = await auth.signInWithEmailLink(\r\n        email,\r\n        window.location.href\r\n      );\r\n      //console.log('RESULT', result);\r\n      if (result.user.emailVerified) {\r\n        //remove user email from local storage\r\n        window.localStorage.removeItem('emailforRegistration');\r\n        //get user id token\r\n        let user = auth.currentUser;\r\n        await user.updatePassword(password);\r\n        const idTokenResult = await user.getIdTokenResult();\r\n        //redux store\r\n        console.log('user', user, 'idTOkenResult', idTokenResult);\r\n        //redirect\r\n\r\n        createOrUpdateUser(idTokenResult.token)\r\n          .then((res) => {\r\n            dispatch({\r\n              type: 'LOGGED_IN_USER',\r\n              payload: {\r\n                name: res.data.name,\r\n                email: res.data.email,\r\n                token: idTokenResult.token,\r\n                role: res.data.roles,\r\n                _id: res.data._id,\r\n              },\r\n            });\r\n          })\r\n          .catch((err) => console.log(err));\r\n        history.push('/');\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(error.message);\r\n    }\r\n  };\r\n  const completeRegisterForm = () => (\r\n    <form onSubmit={handleSubmit}>\r\n      <input type='email' className='form-control' value={email} disabled />\r\n      <input\r\n        type='password'\r\n        className='form-control'\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        placeholder='Password'\r\n        autoFocus\r\n      />\r\n      <br />\r\n      <button type='submit' className='btn btn-raised'>\r\n        Complete Registration\r\n      </button>\r\n    </form>\r\n  );\r\n  return (\r\n    <div className='container p-5'>\r\n      <div className='row'>\r\n        <div className='col-md-6 offset-md-3'>\r\n          <h4>Register</h4>\r\n\r\n          {completeRegisterForm()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegisterComplete;\r\n","D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\reducers\\index.js",[],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\reducers\\userReducer.js",[],["58","59"],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\pages\\auth\\ForgotPassword.js",[],"D:\\ak\\study-DS\\full-stack-javascript\\mern-stack\\e-commerce\\client\\src\\functions\\auth.js",[],{"ruleId":"60","replacedBy":"61"},{"ruleId":"62","replacedBy":"63"},{"ruleId":"64","severity":1,"message":"65","line":42,"column":6,"nodeType":"66","endLine":42,"endColumn":8,"suggestions":"67"},{"ruleId":"68","severity":1,"message":"69","line":11,"column":11,"nodeType":"70","messageId":"71","endLine":11,"endColumn":15},{"ruleId":"60","replacedBy":"72"},{"ruleId":"62","replacedBy":"73"},"no-native-reassign",["74"],"no-negated-in-lhs",["75"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["76"],"no-unused-vars","'user' is assigned a value but never used.","Identifier","unusedVar",["74"],["75"],"no-global-assign","no-unsafe-negation",{"desc":"77","fix":"78"},"Update the dependencies array to be: [dispatch]",{"range":"79","text":"80"},[1417,1419],"[dispatch]"]